# VoriPOS Homebrew Tap

## How do I install these formulae?

`brew install voriteam/voripos/<formula>`

Or `brew tap voriteam/voripos` and then `brew install <formula>`.

## Documentation

`brew help`, `man brew` or check [Homebrew's documentation](https://docs.brew.sh).

## Development
Homebrew tap development is a bit different. When you run `brew tap voriteam/voripos`, the repo will be cloned to
`/opt/homebrew/Library/Taps/voriteam/homebrew-voripos`. This is where you should do your development (as opposed to a
common workspace with your other repositories). That's the only major difference. You should still use branches and
create pull requests for changes.

### Checksums
You will need `sha256sum` to generate SHA-256 checksums on the `tar.gz` files. Install this with:

```shell
brew install coreutils
```

Checksums are generated by running:

```shell
sha256sum <file>
```

Alternatively, you can run `brew install <formula>` (after creating/update the formula `.rb` file) and pull the checksum
from the error message.

### Testing locally
Once you have a formula `.rb` file you can swap the `url` directive for a `head` directive pointed at your local
package. This will allow you to install without having to `tar` the contents every time you make a change:

```shell
brew install --HEAD voriteam/voripos/<package>
```

Remember to swap `head` back to `url` and point to an actual release after testing is completed.

If you do choose to test with `tar.gz` files, you will need to clear the cache with every change:
```shell
rm -rf "$(brew --cache)"
```

### Updating a formula
Updating a formula is pretty straightforward after you've already created a release in the formula's repository. Make
the following changes to the formula's file:

1. Update the `version`.
2. Update the `url` to the latest `tar.gz` file.
3. Update the `sha256` checksum value.

Test the installation locally, and open a pull request if all looks good.

### Creating a formula
Run the command below to create the `.rb` file for the formula, where the path is the fully-defined from root (e.g.,
`/Users/<user>/workspace/<package>`, including the prepended `/`).

```shell
brew create --tap voriteam/voripos file://<path-to-formula-contents> --set-version 0.0.0 --head
```

Alternatively, if you know the package is ready to go point the formula to the remote `tar.gz` file:

```shell
brew create --tap voriteam/voripos https://github.com/voriteam/<package>/archive/refs/tags/0.1.0.tar.gz
```

Ensure the `version` and `sha256` values are correctly set.

Test the installation locally, and open a pull request if all looks good.
